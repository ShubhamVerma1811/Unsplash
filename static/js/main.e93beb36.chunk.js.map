{"version":3,"sources":["services/tokens.js","components/Home.js","components/SearchBox.js","components/SearchResults.js","App.js","index.js"],"names":["h","Headers","append","timeout","baseURL","Home","useState","images","setImages","loading","setLoading","page","React","useRef","dataLoading","getColCount","colCount","setColCount","window","innerWidth","useEffect","addEventListener","e","removeEventListener","loadData","a","current","uri","req","Request","method","headers","header","mode","fetch","res","json","data","prev","listener","document","documentElement","scrollTop","innerHeight","scrollHeight","console","log","clearTimeout","setTimeout","colWithImages","arr","i","push","length","getImagesWithColumns","className","map","column","index","key","imgs","id","style","paddingBottom","src","urls","regular","alt","alt_descriptions","SearchBox","imageSearchQuery","setImageSearchQuery","to","type","onChange","preventDefault","target","value","placeholder","SearchResults","query","useParams","setData","results","error","toUpperCase","App","path","component","exact","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e93beb36.chunk.js","sourcesContent":["const h = new Headers();\n\nh.append(\n  \"Authorization\",\n  \"Client-ID E5EHMkfEkragu1136UCpc_fGGenGwqZltRj6vgw9Hyk\"\n);\n\nconst baseURL = \"https://api.unsplash.com\";\n\nexport { h, baseURL };\n","import React, { useEffect, useState } from \"react\";\nimport { baseURL, h as header } from \"../services/tokens\";\n\nlet timeout;\n\nfunction Home() {\n  const [images, setImages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const page = React.useRef(1);\n  const dataLoading = React.useRef(false);\n  const [colCount, setColCount] = useState(getColCount);\n\n  const getImagesWithColumns = () => {\n    const arr = [];\n    for (let i = 0; i < colCount; i++) {\n      arr.push([]);\n    }\n\n    // [0,3,6,9,12],[1,4,7,10],[2,5,8,11]\n    for (let i = 0; i < images.length; i++) {\n      arr[i % arr.length].push(images[i]);\n    }\n\n    return arr;\n  };\n\n  function getColCount() {\n    if (window.innerWidth < 768 && window.innerWidth > 480) {\n      return 2;\n    }\n    if (window.innerWidth < 480) {\n      return 1;\n    }\n    if (window.innerWidth > 768) {\n      return 3;\n    }\n  }\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", (e) => {\n      setColCount(getColCount());\n    });\n\n    return window.removeEventListener(\"resize\", (e) => {\n      setColCount(getColCount());\n    });\n  }, []);\n\n  useEffect(() => {\n    async function loadData() {\n      dataLoading.current = true;\n      setLoading(true);\n      const uri = `${baseURL}/photos/?per_page=12&page=${page.current}`;\n\n      const req = new Request(uri, {\n        method: \"GET\",\n        headers: header,\n        mode: \"cors\",\n      });\n      const res = await fetch(req);\n      const data = await res.json();\n      setImages((prev) => [...prev, ...data]);\n      setLoading(false);\n      dataLoading.current = false;\n    }\n\n    loadData();\n\n    const listener = (e) => {\n      if (\n        document.documentElement.scrollTop + window.innerHeight >=\n          document.documentElement.scrollHeight - window.innerHeight / 2 &&\n        !dataLoading.current\n      ) {\n        console.log(page.current);\n        console.log(\"called loadData\");\n\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n\n        timeout = setTimeout(() => {\n          page.current += 1;\n          loadData();\n          console.log(dataLoading.current);\n          console.log(\"calling uri\", page.current);\n        }, 100);\n      }\n    };\n    window.addEventListener(\"scroll\", listener);\n    console.log(\"once\");\n    return () => {\n      window.removeEventListener(\"scroll\", listener);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // derived state\n  const colWithImages = getImagesWithColumns();\n\n  return (\n    <div>\n      <h1>Home</h1>\n      <div className=\"imgContainer\">\n        {colWithImages.map((column, index) => (\n          <div key={index}>\n            {column.map((imgs) => (\n              <div\n                key={imgs.id}\n                style={{\n                  paddingBottom: \"20px\",\n                }}\n              >\n                <img\n                  className=\"images\"\n                  src={imgs.urls.regular}\n                  alt={imgs.alt_descriptions}\n                />\n              </div>\n            ))}\n          </div>\n        ))}\n        {loading && <h1>Loading ...</h1>}\n      </div>\n    </div>\n  );\n}\n\nexport default Home;\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"../styles/SearchBox/SearchBox.css\";\n\nfunction SearchBox() {\n  const [imageSearchQuery, setImageSearchQuery] = useState(\"\");\n\n  function searchPhoto(e) {\n    e.preventDefault();\n    setImageSearchQuery(e.target.value);\n  }\n\n  return (\n    <div>\n      <nav>\n        <Link to=\"/\">Unsplash</Link>\n        <form>\n          <input\n            type=\"text\"\n            onChange={searchPhoto}\n            placeholder=\"Search Images\"\n          />\n          <Link to={`/images/${imageSearchQuery}`} id=\"btn\">\n            <button type=\"submit\">Search</button>\n          </Link>\n        </form>\n      </nav>\n    </div>\n  );\n}\n\nexport default SearchBox;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { h as header } from \"../services/tokens\";\n\nlet timeout;\n\nfunction SearchResults() {\n  let { query } = useParams();\n  const page = React.useRef(1);\n  const dataLoading = React.useRef(false);\n  const [colCount, setColCount] = useState(getColCount);\n\n  const [data, setData] = useState([]);\n\n  const getImagesWithColumns = () => {\n    const arr = [];\n    for (let i = 0; i < colCount; i++) {\n      arr.push([]);\n    }\n\n    // [0,3,6,9,12],[1,4,7,10],[2,5,8,11]\n    for (let i = 0; i < data.length; i++) {\n      arr[i % arr.length].push(data[i]);\n    }\n\n    return arr;\n  };\n\n  function getColCount() {\n    if (window.innerWidth < 768 && window.innerWidth > 480) {\n      return 2;\n    }\n    if (window.innerWidth < 480) {\n      return 1;\n    }\n    if (window.innerWidth > 768) {\n      return 3;\n    }\n  }\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", (e) => {\n      setColCount(getColCount());\n    });\n\n    return window.removeEventListener(\"resize\", (e) => {\n      setColCount(getColCount());\n    });\n  }, []);\n\n  async function loadData() {\n    dataLoading.current = true;\n\n    const uri = `https://api.unsplash.com/search/photos?page=${page.current}&per_page=12&query=${query}`;\n\n    const req = new Request(uri, {\n      method: \"GET\",\n      headers: header,\n      mode: \"cors\",\n    });\n\n    const res = await fetch(req);\n    const data = await res.json();\n    if (page.current === 1) {\n      setData(data.results);\n    } else {\n      setData((prev) => [...prev, ...data.results]);\n    }\n    dataLoading.current = false;\n  }\n\n  useEffect(() => {\n    try {\n      loadData();\n      page.current = 1;\n\n      const listener = (e) => {\n        if (\n          document.documentElement.scrollTop + window.innerHeight >=\n            document.documentElement.scrollHeight - window.innerHeight / 2 &&\n          !dataLoading.current\n        ) {\n          console.log(page.current);\n          console.log(\"called loadData\");\n\n          if (timeout) {\n            clearTimeout(timeout);\n            timeout = null;\n          }\n\n          timeout = setTimeout(() => {\n            page.current += 1;\n            loadData();\n            console.log(dataLoading.current);\n            console.log(\"calling uri\", page.current);\n          }, 100);\n        }\n      };\n      window.addEventListener(\"scroll\", listener);\n      console.log(\"once\");\n      return () => {\n        window.removeEventListener(\"scroll\", listener);\n      };\n    } catch (error) {\n      console.log(error);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [query]);\n\n  const colWithImages = getImagesWithColumns();\n\n  return (\n    <div>\n      <h1>{query.toUpperCase()}</h1>\n      <div>\n        <h1>Home</h1>\n        <div className=\"imgContainer\">\n          {colWithImages.map((column, index) => (\n            <div key={index}>\n              {column.map((imgs) => (\n                <div\n                  key={imgs.id}\n                  style={{\n                    paddingBottom: \"20px\",\n                  }}\n                >\n                  <img\n                    className=\"images\"\n                    src={imgs.urls.regular}\n                    alt={imgs.alt_descriptions}\n                  />\n                </div>\n              ))}\n            </div>\n          ))}\n          {dataLoading && <h1>Loading ...</h1>}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default SearchResults;\n","import React from \"react\";\nimport { HashRouter as Router, Route } from \"react-router-dom\";\nimport \"./App.css\";\nimport Home from \"./components/Home\";\nimport SearchBox from \"./components/SearchBox\";\nimport SearchResults from \"./components/SearchResults\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Router>\n        <Route path=\"/\" component={SearchBox} />\n        <Route path=\"/\" exact component={Home} />\n        <Route path=\"/images/:query\" exact component={SearchResults} />\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}