{"version":3,"sources":["services/tokens.js","components/Home.js","components/SearchBox.js","components/SearchResults.js","App.js","index.js"],"names":["h","Headers","append","baseURL","Home","useState","images","setImages","loading","setLoading","page","React","useRef","dataLoading","colCount","setColCount","useEffect","window","addEventListener","e","innerWidth","removeEventListener","console","log","loadData","a","uri","current","req","Request","method","headers","header","mode","fetch","res","json","data","prev","listener","document","documentElement","scrollTop","scrollHeight","colWithImages","arr","i","push","length","getImagesWithColumns","className","map","column","imgs","style","paddingBottom","src","urls","regular","alt","alt_descriptions","SearchBox","imageSearchQuery","setImageSearchQuery","to","type","onChange","preventDefault","target","value","placeholder","id","SearchResults","query","useParams","setData","results","error","toUpperCase","item","key","App","path","component","exact","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a6d8a99b.chunk.js","sourcesContent":["const h = new Headers();\n\nh.append(\n  \"Authorization\",\n  \"Client-ID E5EHMkfEkragu1136UCpc_fGGenGwqZltRj6vgw9Hyk\"\n);\n\nconst baseURL = \"https://api.unsplash.com\";\n\nexport { h, baseURL };\n","import React, { useEffect, useState } from \"react\";\nimport { baseURL, h as header } from \"../services/tokens\";\n\nfunction Home() {\n  const [images, setImages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const page = React.useRef(1);\n  const dataLoading = React.useRef(false);\n  const [colCount, setColCount] = useState(3);\n\n  const getImagesWithColumns = () => {\n    const arr = [];\n    for (let i = 0; i < colCount; i++) {\n      arr.push([]);\n    }\n\n    // [0,3,6,9,12],[1,4,7,10],[2,5,8,11]\n    for (let i = 0; i < images.length; i++) {\n      arr[i % arr.length].push(images[i]);\n    }\n\n    return arr;\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", (e) => {\n      if (window.innerWidth < 768 && window.innerWidth > 480) {\n        setColCount(2);\n      }\n      if (window.innerWidth < 480) {\n        setColCount(1);\n      }\n      if (window.innerWidth > 768) {\n        setColCount(3);\n      }\n    });\n\n    return window.removeEventListener(\"resize\", (e) => {\n      console.log(\"removed\");\n    });\n  }, []);\n\n  useEffect(() => {\n    async function loadData() {\n      setLoading(true);\n      const uri = `${baseURL}/photos/?per_page=12&page=${page.current}`;\n\n      const req = new Request(uri, {\n        method: \"GET\",\n        headers: header,\n        mode: \"cors\",\n      });\n      dataLoading.current = true;\n      const res = await fetch(req);\n      const data = await res.json();\n\n      setImages((prev) => [...prev, ...data]);\n\n      setLoading(false);\n      dataLoading.current = false;\n      console.log(page.current);\n      console.log(\"called loadData\");\n    }\n\n    loadData();\n\n    const listener = (e) => {\n      if (\n        document.documentElement.scrollTop >\n          document.documentElement.scrollHeight / 3 &&\n        !dataLoading.current\n      ) {\n        console.log(\"scrolled\");\n        page.current += 1;\n        loadData();\n      }\n    };\n    window.addEventListener(\"scroll\", listener);\n\n    console.log(\"once\");\n\n    return () => {\n      window.removeEventListener(\"scroll\", listener);\n    };\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // derived state\n  const colWithImages = getImagesWithColumns();\n\n  return (\n    <div>\n      <h1>Home</h1>\n      <div className=\"imgContainer\">\n        {colWithImages.map((column) => (\n          <div>\n            {column.map((imgs) => (\n              <div\n                style={{\n                  paddingBottom: \"20px\",\n                }}\n              >\n                <img\n                  className=\"images\"\n                  src={imgs.urls.regular}\n                  alt={imgs.alt_descriptions}\n                />\n              </div>\n            ))}\n          </div>\n        ))}\n        {loading && <h1>Loading ...</h1>}\n      </div>\n    </div>\n  );\n}\n\nexport default Home;\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"../styles/SearchBox/SearchBox.css\";\n\nfunction SearchBox() {\n  const [imageSearchQuery, setImageSearchQuery] = useState(\"\");\n\n  function searchPhoto(e) {\n    e.preventDefault();\n    setImageSearchQuery(e.target.value);\n  }\n\n  return (\n    <div>\n      <nav>\n        <Link to=\"/\">Unsplash</Link>\n        <form>\n          <input\n            type=\"text\"\n            onChange={searchPhoto}\n            placeholder=\"Search Images\"\n          />\n          <Link to={`/images/${imageSearchQuery}`} id=\"btn\">\n            <button type=\"submit\">Search</button>\n          </Link>\n        </form>\n      </nav>\n    </div>\n  );\n}\n\nexport default SearchBox;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { h as header } from \"../services/tokens\";\n\nfunction SearchResults() {\n  let { query } = useParams();\n  const page = React.useRef(1);\n  const dataLoading = React.useRef(false);\n\n  const [data, setData] = useState([]);\n\n  const uri = `https://api.unsplash.com/search/photos?page=1&per_page=15&query=${query}`;\n\n  async function loadData() {\n    const req = new Request(uri, {\n      method: \"GET\",\n      headers: header,\n      mode: \"cors\",\n    });\n\n    const res = await fetch(req);\n    const data = await res.json();\n    if (page.current === 1) {\n      setData(data.results);\n    } else {\n      setData((prev) => [...prev, ...data.results]);\n    }\n  }\n\n  useEffect(() => {\n    try {\n      loadData();\n\n      const listener = (e) => {\n        if (\n          document.documentElement.scrollTop >\n            document.documentElement.scrollHeight / 2 &&\n          !dataLoading.current\n        ) {\n          console.log(\"scrolled\");\n          page.current += 1;\n          loadData();\n        }\n      };\n      window.addEventListener(\"scroll\", listener);\n\n      console.log(\"once\");\n\n      return () => {\n        window.removeEventListener(\"scroll\", listener);\n      };\n    } catch (error) {\n      console.log(error);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <div>\n      <h1>{query.toUpperCase()}</h1>\n      <div className=\"imgContainer\">\n        {data.length ? (\n          data.map((item) => (\n            <div key={item.id} className=\"content\">\n              <img\n                className=\"images\"\n                src={item.urls.regular}\n                alt={item.alt_descriptions}\n              />\n            </div>\n          ))\n        ) : (\n          <p>Couldn't find any images for that. Please try again</p>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default SearchResults;\n","import React from \"react\";\nimport { HashRouter as Router, Route } from \"react-router-dom\";\nimport \"./App.css\";\nimport Home from \"./components/Home\";\nimport SearchBox from \"./components/SearchBox\";\nimport SearchResults from \"./components/SearchResults\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Router>\n        <Route path=\"/\" component={SearchBox} />\n        <Route path=\"/\" exact component={Home} />\n        <Route path=\"/images/:query\" exact component={SearchResults} />\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}